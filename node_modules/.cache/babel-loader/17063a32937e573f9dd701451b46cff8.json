{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t(require(\"prop-types\"), require(\"react\"), require(\"react-dom\")) : \"function\" == typeof define && define.amd ? define([\"prop-types\", \"react\", \"react-dom\"], t) : e.AvatarEditor = t(e.PropTypes, e.React, e.ReactDOM);\n}(this, function (e, t, o) {\n  \"use strict\";\n\n  function n(e, t) {\n    return new Promise(function (o, n) {\n      var i,\n          a = new Image();\n      a.onload = function () {\n        return o(a);\n      }, a.onerror = n, !1 == (null !== (i = e) && !!i.match(/^\\s*data:([a-z]+\\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\\-._~:@/?%\\s]*\\s*$/i)) && t && (a.crossOrigin = t), a.src = e;\n    });\n  }\n\n  e = e && e.hasOwnProperty(\"default\") ? e.default : e, t = t && t.hasOwnProperty(\"default\") ? t.default : t, o = o && o.hasOwnProperty(\"default\") ? o.default : o;\n\n  var i = function (e, t) {\n    if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n  },\n      a = function () {\n    function e(e, t) {\n      for (var o = 0; o < t.length; o++) {\n        var n = t[o];\n        n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n      }\n    }\n\n    return function (t, o, n) {\n      return o && e(t.prototype, o), n && e(t, n), t;\n    };\n  }(),\n      r = Object.assign || function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var o = arguments[t];\n\n      for (var n in o) Object.prototype.hasOwnProperty.call(o, n) && (e[n] = o[n]);\n    }\n\n    return e;\n  },\n      s = function (e, t) {\n    if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n  },\n      h = function () {\n    return function (e, t) {\n      if (Array.isArray(e)) return e;\n      if (Symbol.iterator in Object(e)) return function (e, t) {\n        var o = [],\n            n = !0,\n            i = !1,\n            a = void 0;\n\n        try {\n          for (var r, s = e[Symbol.iterator](); !(n = (r = s.next()).done) && (o.push(r.value), !t || o.length !== t); n = !0);\n        } catch (e) {\n          i = !0, a = e;\n        } finally {\n          try {\n            !n && s.return && s.return();\n          } finally {\n            if (i) throw a;\n          }\n        }\n\n        return o;\n      }(e, t);\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    };\n  }(),\n      u = function (e) {\n    var t = !1;\n    return {\n      promise: new Promise(function (o, n) {\n        e.then(function (e) {\n          return t ? n({\n            isCanceled: !0\n          }) : o(e);\n        }, function (e) {\n          return n(t ? {\n            isCanceled: !0\n          } : e);\n        });\n      }),\n      cancel: function () {\n        t = !0;\n      }\n    };\n  },\n      c = !(\"undefined\" == typeof window || \"undefined\" == typeof navigator || !(\"ontouchstart\" in window || navigator.msMaxTouchPoints > 0)),\n      d = \"undefined\" != typeof File,\n      l = {\n    touch: {\n      react: {\n        down: \"onTouchStart\",\n        mouseDown: \"onMouseDown\",\n        drag: \"onTouchMove\",\n        move: \"onTouchMove\",\n        mouseMove: \"onMouseMove\",\n        up: \"onTouchEnd\",\n        mouseUp: \"onMouseUp\"\n      },\n      native: {\n        down: \"touchstart\",\n        mouseDown: \"mousedown\",\n        drag: \"touchmove\",\n        move: \"touchmove\",\n        mouseMove: \"mousemove\",\n        up: \"touchend\",\n        mouseUp: \"mouseup\"\n      }\n    },\n    desktop: {\n      react: {\n        down: \"onMouseDown\",\n        drag: \"onDragOver\",\n        move: \"onMouseMove\",\n        up: \"onMouseUp\"\n      },\n      native: {\n        down: \"mousedown\",\n        drag: \"dragStart\",\n        move: \"mousemove\",\n        up: \"mouseup\"\n      }\n    }\n  },\n      p = c ? l.touch : l.desktop,\n      g = \"undefined\" != typeof window && window.devicePixelRatio ? window.devicePixelRatio : 1,\n      m = {\n    x: .5,\n    y: .5\n  },\n      v = function (e) {\n    function l() {\n      var e, t, o;\n      i(this, l);\n\n      for (var n = arguments.length, a = Array(n), h = 0; h < n; h++) a[h] = arguments[h];\n\n      return t = o = s(this, (e = l.__proto__ || Object.getPrototypeOf(l)).call.apply(e, [this].concat(a))), o.state = {\n        drag: !1,\n        my: null,\n        mx: null,\n        image: m\n      }, o.handleImageReady = function (e) {\n        var t = o.getInitialSize(e.width, e.height);\n        t.resource = e, t.x = .5, t.y = .5, o.setState({\n          drag: !1,\n          image: t\n        }, o.props.onImageReady), o.props.onLoadSuccess(t);\n      }, o.clearImage = function () {\n        var e = o.canvas;\n        e.getContext(\"2d\").clearRect(0, 0, e.width, e.height), o.setState({\n          image: m\n        });\n      }, o.handleMouseDown = function (e) {\n        (e = e || window.event).preventDefault(), o.setState({\n          drag: !0,\n          mx: null,\n          my: null\n        });\n      }, o.handleMouseUp = function () {\n        o.state.drag && (o.setState({\n          drag: !1\n        }), o.props.onMouseUp());\n      }, o.handleMouseMove = function (e) {\n        if (e = e || window.event, !1 !== o.state.drag) {\n          e.preventDefault();\n          var t = e.targetTouches ? e.targetTouches[0].pageX : e.clientX,\n              n = e.targetTouches ? e.targetTouches[0].pageY : e.clientY,\n              i = {\n            mx: t,\n            my: n\n          },\n              a = o.props.rotate;\n\n          if (a = (a %= 360) < 0 ? a + 360 : a, o.state.mx && o.state.my) {\n            var s = o.state.mx - t,\n                h = o.state.my - n,\n                u = o.state.image.width * o.props.scale,\n                c = o.state.image.height * o.props.scale,\n                d = o.getCroppingRect(),\n                l = d.x,\n                p = d.y;\n            l *= u, p *= c;\n\n            var g = function (e) {\n              return e * (Math.PI / 180);\n            },\n                m = Math.cos(g(a)),\n                v = Math.sin(g(a)),\n                f = p + -s * v + h * m,\n                y = {\n              x: (l + s * m + h * v) / u + 1 / o.props.scale * o.getXScale() / 2,\n              y: f / c + 1 / o.props.scale * o.getYScale() / 2\n            };\n\n            o.props.onPositionChange(y), i.image = r({}, o.state.image, y);\n          }\n\n          o.setState(i), o.props.onMouseMove(e);\n        }\n      }, o.setCanvas = function (e) {\n        o.canvas = e;\n      }, s(o, t);\n    }\n\n    return function (e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);\n      e.prototype = Object.create(t && t.prototype, {\n        constructor: {\n          value: e,\n          enumerable: !1,\n          writable: !0,\n          configurable: !0\n        }\n      }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n    }(l, t.Component), a(l, [{\n      key: \"componentDidMount\",\n      value: function () {\n        this.props.disableHiDPIScaling && (g = 1);\n        var e = o.findDOMNode(this.canvas).getContext(\"2d\");\n\n        if (this.props.image && this.loadImage(this.props.image), this.paint(e), document) {\n          var t = !!function () {\n            var e = !1;\n\n            try {\n              var t = Object.defineProperty({}, \"passive\", {\n                get: function () {\n                  e = !0;\n                }\n              });\n              window.addEventListener(\"test\", t, t), window.removeEventListener(\"test\", t, t);\n            } catch (t) {\n              e = !1;\n            }\n\n            return e;\n          }() && {\n            passive: !1\n          },\n              n = p.native;\n          document.addEventListener(n.move, this.handleMouseMove, t), document.addEventListener(n.up, this.handleMouseUp, t), c && (document.addEventListener(n.mouseMove, this.handleMouseMove, t), document.addEventListener(n.mouseUp, this.handleMouseUp, t));\n        }\n      }\n    }, {\n      key: \"componentWillReceiveProps\",\n      value: function (e) {\n        e.image && this.props.image !== e.image || this.props.width !== e.width || this.props.height !== e.height ? this.loadImage(e.image) : e.image || this.clearImage();\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function (e, t) {\n        var n = o.findDOMNode(this.canvas),\n            i = n.getContext(\"2d\");\n        i.clearRect(0, 0, n.width, n.height), this.paint(i), this.paintImage(i, this.state.image, this.props.border), e.image === this.props.image && e.width === this.props.width && e.height === this.props.height && e.position === this.props.position && e.scale === this.props.scale && e.rotate === this.props.rotate && t.my === this.state.my && t.mx === this.state.mx && t.image.x === this.state.image.x && t.image.y === this.state.image.y || this.props.onImageChange();\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function () {\n        if (document) {\n          var e = p.native;\n          document.removeEventListener(e.move, this.handleMouseMove, !1), document.removeEventListener(e.up, this.handleMouseUp, !1), c && (document.removeEventListener(e.mouseMove, this.handleMouseMove, !1), document.removeEventListener(e.mouseUp, this.handleMouseUp, !1));\n        }\n      }\n    }, {\n      key: \"isVertical\",\n      value: function () {\n        return this.props.rotate % 180 != 0;\n      }\n    }, {\n      key: \"getBorders\",\n      value: function () {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.props.border;\n        return Array.isArray(e) ? e : [e, e];\n      }\n    }, {\n      key: \"getDimensions\",\n      value: function () {\n        var e = this.props,\n            t = e.width,\n            o = e.height,\n            n = e.rotate,\n            i = e.border,\n            a = {},\n            r = this.getBorders(i),\n            s = h(r, 2),\n            u = s[0],\n            c = s[1],\n            d = t,\n            l = o;\n        return this.isVertical() ? (a.width = l, a.height = d) : (a.width = d, a.height = l), a.width += 2 * u, a.height += 2 * c, {\n          canvas: a,\n          rotate: n,\n          width: t,\n          height: o,\n          border: i\n        };\n      }\n    }, {\n      key: \"getImage\",\n      value: function () {\n        var e = this.getCroppingRect(),\n            t = this.state.image;\n        e.x *= t.resource.width, e.y *= t.resource.height, e.width *= t.resource.width, e.height *= t.resource.height;\n        var o = document.createElement(\"canvas\");\n        this.isVertical() ? (o.width = e.height, o.height = e.width) : (o.width = e.width, o.height = e.height);\n        var n = o.getContext(\"2d\");\n        return n.translate(o.width / 2, o.height / 2), n.rotate(this.props.rotate * Math.PI / 180), n.translate(-o.width / 2, -o.height / 2), this.isVertical() && n.translate((o.width - o.height) / 2, (o.height - o.width) / 2), n.drawImage(t.resource, -e.x, -e.y), o;\n      }\n    }, {\n      key: \"getImageScaledToCanvas\",\n      value: function () {\n        var e = this.getDimensions(),\n            t = e.width,\n            o = e.height,\n            n = document.createElement(\"canvas\");\n        return this.isVertical() ? (n.width = o, n.height = t) : (n.width = t, n.height = o), this.paintImage(n.getContext(\"2d\"), this.state.image, 0, 1), n;\n      }\n    }, {\n      key: \"getXScale\",\n      value: function () {\n        var e = this.props.width / this.props.height,\n            t = this.state.image.width / this.state.image.height;\n        return Math.min(1, e / t);\n      }\n    }, {\n      key: \"getYScale\",\n      value: function () {\n        var e = this.props.height / this.props.width,\n            t = this.state.image.height / this.state.image.width;\n        return Math.min(1, e / t);\n      }\n    }, {\n      key: \"getCroppingRect\",\n      value: function () {\n        var e = this.props.position || {\n          x: this.state.image.x,\n          y: this.state.image.y\n        },\n            t = 1 / this.props.scale * this.getXScale(),\n            o = 1 / this.props.scale * this.getYScale(),\n            n = {\n          x: e.x - t / 2,\n          y: e.y - o / 2,\n          width: t,\n          height: o\n        },\n            i = 0,\n            a = 1 - n.width,\n            s = 0,\n            h = 1 - n.height;\n        return (this.props.disableBoundaryChecks || t > 1 || o > 1) && (i = -n.width, a = 1, s = -n.height, h = 1), r({}, n, {\n          x: Math.max(i, Math.min(n.x, a)),\n          y: Math.max(s, Math.min(n.y, h))\n        });\n      }\n    }, {\n      key: \"loadImage\",\n      value: function (e) {\n        var t;\n        d && e instanceof File ? this.loadingImage = u((t = e, new Promise(function (e, o) {\n          var i = new FileReader();\n          i.onload = function (t) {\n            try {\n              var i = n(t.target.result);\n              e(i);\n            } catch (t) {\n              o(t);\n            }\n          }, i.readAsDataURL(t);\n        }))).promise.then(this.handleImageReady).catch(this.props.onLoadFailure) : \"string\" == typeof e && (this.loadingImage = u(n(e, this.props.crossOrigin)).promise.then(this.handleImageReady).catch(this.props.onLoadFailure));\n      }\n    }, {\n      key: \"getInitialSize\",\n      value: function (e, t) {\n        var o = void 0,\n            n = void 0,\n            i = this.getDimensions();\n        return i.height / i.width > t / e ? n = e * ((o = this.getDimensions().height) / t) : o = t * ((n = this.getDimensions().width) / e), {\n          height: o,\n          width: n\n        };\n      }\n    }, {\n      key: \"paintImage\",\n      value: function (e, t, o) {\n        var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : g;\n\n        if (t.resource) {\n          var i = this.calculatePosition(t, o);\n          e.save(), e.translate(e.canvas.width / 2, e.canvas.height / 2), e.rotate(this.props.rotate * Math.PI / 180), e.translate(-e.canvas.width / 2, -e.canvas.height / 2), this.isVertical() && e.translate((e.canvas.width - e.canvas.height) / 2, (e.canvas.height - e.canvas.width) / 2), e.scale(n, n), e.globalCompositeOperation = \"destination-over\", e.drawImage(t.resource, i.x, i.y, i.width, i.height), e.restore();\n        }\n      }\n    }, {\n      key: \"calculatePosition\",\n      value: function (e, t) {\n        e = e || this.state.image;\n        var o = this.getBorders(t),\n            n = h(o, 2),\n            i = n[0],\n            a = n[1],\n            r = this.getCroppingRect(),\n            s = e.width * this.props.scale,\n            u = e.height * this.props.scale,\n            c = -r.x * s,\n            d = -r.y * u;\n        return this.isVertical() ? (c += a, d += i) : (c += i, d += a), {\n          x: c,\n          y: d,\n          height: u,\n          width: s\n        };\n      }\n    }, {\n      key: \"paint\",\n      value: function (e) {\n        e.save(), e.scale(g, g), e.translate(0, 0), e.fillStyle = \"rgba(\" + this.props.color.slice(0, 4).join(\",\") + \")\";\n        var t = this.props.borderRadius,\n            o = this.getDimensions(),\n            n = this.getBorders(o.border),\n            i = h(n, 2),\n            a = i[0],\n            r = i[1],\n            s = o.canvas.height,\n            u = o.canvas.width;\n        t = Math.max(t, 0), t = Math.min(t, u / 2 - a, s / 2 - r), e.beginPath(), function (e, t, o, n, i, a) {\n          if (0 === a) e.rect(t, o, n, i);else {\n            var r = n - a,\n                s = i - a;\n            e.translate(t, o), e.arc(a, a, a, Math.PI, 1.5 * Math.PI), e.lineTo(r, 0), e.arc(r, a, a, 1.5 * Math.PI, 2 * Math.PI), e.lineTo(n, s), e.arc(r, s, a, 2 * Math.PI, .5 * Math.PI), e.lineTo(a, i), e.arc(a, s, a, .5 * Math.PI, Math.PI), e.translate(-t, -o);\n          }\n        }(e, a, r, u - 2 * a, s - 2 * r, t), e.rect(u, 0, -u, s), e.fill(\"evenodd\"), e.restore();\n      }\n    }, {\n      key: \"render\",\n      value: function () {\n        var e = this.props,\n            o = (e.scale, e.rotate, e.image, e.border, e.borderRadius, e.width, e.height, e.position, e.color, e.style),\n            n = (e.crossOrigin, e.onLoadFailure, e.onLoadSuccess, e.onImageReady, e.onImageChange, e.onMouseUp, e.onMouseMove, e.onPositionChange, e.disableBoundaryChecks, e.disableHiDPIScaling, function (e, t) {\n          var o = {};\n\n          for (var n in e) t.indexOf(n) >= 0 || Object.prototype.hasOwnProperty.call(e, n) && (o[n] = e[n]);\n\n          return o;\n        }(e, [\"scale\", \"rotate\", \"image\", \"border\", \"borderRadius\", \"width\", \"height\", \"position\", \"color\", \"style\", \"crossOrigin\", \"onLoadFailure\", \"onLoadSuccess\", \"onImageReady\", \"onImageChange\", \"onMouseUp\", \"onMouseMove\", \"onPositionChange\", \"disableBoundaryChecks\", \"disableHiDPIScaling\"])),\n            i = this.getDimensions(),\n            a = {\n          width: i.canvas.width,\n          height: i.canvas.height,\n          cursor: this.state.drag ? \"grabbing\" : \"grab\",\n          touchAction: \"none\"\n        },\n            s = {\n          width: i.canvas.width * g,\n          height: i.canvas.height * g,\n          style: r({}, a, o)\n        };\n        return s[p.react.down] = this.handleMouseDown, c && (s[p.react.mouseDown] = this.handleMouseDown), t.createElement(\"canvas\", r({\n          ref: this.setCanvas\n        }, s, n));\n      }\n    }]), l;\n  }();\n\n  return v.propTypes = {\n    scale: e.number,\n    rotate: e.number,\n    image: e.oneOfType([e.string].concat(function (e) {\n      if (Array.isArray(e)) {\n        for (var t = 0, o = Array(e.length); t < e.length; t++) o[t] = e[t];\n\n        return o;\n      }\n\n      return Array.from(e);\n    }(d ? [e.instanceOf(File)] : []))),\n    border: e.oneOfType([e.number, e.arrayOf(e.number)]),\n    borderRadius: e.number,\n    width: e.number,\n    height: e.number,\n    position: e.shape({\n      x: e.number,\n      y: e.number\n    }),\n    color: e.arrayOf(e.number),\n    crossOrigin: e.oneOf([\"\", \"anonymous\", \"use-credentials\"]),\n    onLoadFailure: e.func,\n    onLoadSuccess: e.func,\n    onImageReady: e.func,\n    onImageChange: e.func,\n    onMouseUp: e.func,\n    onMouseMove: e.func,\n    onPositionChange: e.func,\n    disableBoundaryChecks: e.bool,\n    disableHiDPIScaling: e.bool\n  }, v.defaultProps = {\n    scale: 1,\n    rotate: 0,\n    border: 25,\n    borderRadius: 0,\n    width: 200,\n    height: 200,\n    color: [0, 0, 0, .5],\n    onLoadFailure: function () {},\n    onLoadSuccess: function () {},\n    onImageReady: function () {},\n    onImageChange: function () {},\n    onMouseUp: function () {},\n    onMouseMove: function () {},\n    onPositionChange: function () {},\n    disableBoundaryChecks: !1,\n    disableHiDPIScaling: !1\n  }, v;\n});","map":{"version":3,"sources":["/home/aniketbhavsar/React Image-upload/node_modules/react-avatar-editor/dist/index.js"],"names":["e","t","exports","module","require","define","amd","AvatarEditor","PropTypes","React","ReactDOM","o","n","Promise","i","a","Image","onload","onerror","match","crossOrigin","src","hasOwnProperty","default","TypeError","length","enumerable","configurable","writable","Object","defineProperty","key","prototype","r","assign","arguments","call","s","ReferenceError","h","Array","isArray","Symbol","iterator","next","done","push","value","return","u","promise","then","isCanceled","cancel","c","window","navigator","msMaxTouchPoints","d","File","l","touch","react","down","mouseDown","drag","move","mouseMove","up","mouseUp","native","desktop","p","g","devicePixelRatio","m","x","y","v","__proto__","getPrototypeOf","apply","concat","state","my","mx","image","handleImageReady","getInitialSize","width","height","resource","setState","props","onImageReady","onLoadSuccess","clearImage","canvas","getContext","clearRect","handleMouseDown","event","preventDefault","handleMouseUp","onMouseUp","handleMouseMove","targetTouches","pageX","clientX","pageY","clientY","rotate","scale","getCroppingRect","Math","PI","cos","sin","f","getXScale","getYScale","onPositionChange","onMouseMove","setCanvas","create","constructor","setPrototypeOf","Component","disableHiDPIScaling","findDOMNode","loadImage","paint","document","get","addEventListener","removeEventListener","passive","paintImage","border","position","onImageChange","getBorders","isVertical","createElement","translate","drawImage","getDimensions","min","disableBoundaryChecks","max","loadingImage","FileReader","target","result","readAsDataURL","catch","onLoadFailure","calculatePosition","save","globalCompositeOperation","restore","fillStyle","color","slice","join","borderRadius","beginPath","rect","arc","lineTo","fill","style","indexOf","cursor","touchAction","ref","propTypes","number","oneOfType","string","from","instanceOf","arrayOf","shape","oneOf","func","bool","defaultProps"],"mappings":"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","sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"prop-types\"),require(\"react\"),require(\"react-dom\")):\"function\"==typeof define&&define.amd?define([\"prop-types\",\"react\",\"react-dom\"],t):e.AvatarEditor=t(e.PropTypes,e.React,e.ReactDOM)}(this,function(e,t,o){\"use strict\";function n(e,t){return new Promise(function(o,n){var i,a=new Image;a.onload=function(){return o(a)},a.onerror=n,!1==(null!==(i=e)&&!!i.match(/^\\s*data:([a-z]+\\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\\-._~:@/?%\\s]*\\s*$/i))&&t&&(a.crossOrigin=t),a.src=e})}e=e&&e.hasOwnProperty(\"default\")?e.default:e,t=t&&t.hasOwnProperty(\"default\")?t.default:t,o=o&&o.hasOwnProperty(\"default\")?o.default:o;var i=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},s=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t},h=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),u=function(e){var t=!1;return{promise:new Promise(function(o,n){e.then(function(e){return t?n({isCanceled:!0}):o(e)},function(e){return n(t?{isCanceled:!0}:e)})}),cancel:function(){t=!0}}},c=!(\"undefined\"==typeof window||\"undefined\"==typeof navigator||!(\"ontouchstart\"in window||navigator.msMaxTouchPoints>0)),d=\"undefined\"!=typeof File,l={touch:{react:{down:\"onTouchStart\",mouseDown:\"onMouseDown\",drag:\"onTouchMove\",move:\"onTouchMove\",mouseMove:\"onMouseMove\",up:\"onTouchEnd\",mouseUp:\"onMouseUp\"},native:{down:\"touchstart\",mouseDown:\"mousedown\",drag:\"touchmove\",move:\"touchmove\",mouseMove:\"mousemove\",up:\"touchend\",mouseUp:\"mouseup\"}},desktop:{react:{down:\"onMouseDown\",drag:\"onDragOver\",move:\"onMouseMove\",up:\"onMouseUp\"},native:{down:\"mousedown\",drag:\"dragStart\",move:\"mousemove\",up:\"mouseup\"}}},p=c?l.touch:l.desktop,g=\"undefined\"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,m={x:.5,y:.5},v=function(e){function l(){var e,t,o;i(this,l);for(var n=arguments.length,a=Array(n),h=0;h<n;h++)a[h]=arguments[h];return t=o=s(this,(e=l.__proto__||Object.getPrototypeOf(l)).call.apply(e,[this].concat(a))),o.state={drag:!1,my:null,mx:null,image:m},o.handleImageReady=function(e){var t=o.getInitialSize(e.width,e.height);t.resource=e,t.x=.5,t.y=.5,o.setState({drag:!1,image:t},o.props.onImageReady),o.props.onLoadSuccess(t)},o.clearImage=function(){var e=o.canvas;e.getContext(\"2d\").clearRect(0,0,e.width,e.height),o.setState({image:m})},o.handleMouseDown=function(e){(e=e||window.event).preventDefault(),o.setState({drag:!0,mx:null,my:null})},o.handleMouseUp=function(){o.state.drag&&(o.setState({drag:!1}),o.props.onMouseUp())},o.handleMouseMove=function(e){if(e=e||window.event,!1!==o.state.drag){e.preventDefault();var t=e.targetTouches?e.targetTouches[0].pageX:e.clientX,n=e.targetTouches?e.targetTouches[0].pageY:e.clientY,i={mx:t,my:n},a=o.props.rotate;if(a=(a%=360)<0?a+360:a,o.state.mx&&o.state.my){var s=o.state.mx-t,h=o.state.my-n,u=o.state.image.width*o.props.scale,c=o.state.image.height*o.props.scale,d=o.getCroppingRect(),l=d.x,p=d.y;l*=u,p*=c;var g=function(e){return e*(Math.PI/180)},m=Math.cos(g(a)),v=Math.sin(g(a)),f=p+-s*v+h*m,y={x:(l+s*m+h*v)/u+1/o.props.scale*o.getXScale()/2,y:f/c+1/o.props.scale*o.getYScale()/2};o.props.onPositionChange(y),i.image=r({},o.state.image,y)}o.setState(i),o.props.onMouseMove(e)}},o.setCanvas=function(e){o.canvas=e},s(o,t)}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,t.Component),a(l,[{key:\"componentDidMount\",value:function(){this.props.disableHiDPIScaling&&(g=1);var e=o.findDOMNode(this.canvas).getContext(\"2d\");if(this.props.image&&this.loadImage(this.props.image),this.paint(e),document){var t=!!function(){var e=!1;try{var t=Object.defineProperty({},\"passive\",{get:function(){e=!0}});window.addEventListener(\"test\",t,t),window.removeEventListener(\"test\",t,t)}catch(t){e=!1}return e}()&&{passive:!1},n=p.native;document.addEventListener(n.move,this.handleMouseMove,t),document.addEventListener(n.up,this.handleMouseUp,t),c&&(document.addEventListener(n.mouseMove,this.handleMouseMove,t),document.addEventListener(n.mouseUp,this.handleMouseUp,t))}}},{key:\"componentWillReceiveProps\",value:function(e){e.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height?this.loadImage(e.image):e.image||this.clearImage()}},{key:\"componentDidUpdate\",value:function(e,t){var n=o.findDOMNode(this.canvas),i=n.getContext(\"2d\");i.clearRect(0,0,n.width,n.height),this.paint(i),this.paintImage(i,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y||this.props.onImageChange()}},{key:\"componentWillUnmount\",value:function(){if(document){var e=p.native;document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),c&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1))}}},{key:\"isVertical\",value:function(){return this.props.rotate%180!=0}},{key:\"getBorders\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:\"getDimensions\",value:function(){var e=this.props,t=e.width,o=e.height,n=e.rotate,i=e.border,a={},r=this.getBorders(i),s=h(r,2),u=s[0],c=s[1],d=t,l=o;return this.isVertical()?(a.width=l,a.height=d):(a.width=d,a.height=l),a.width+=2*u,a.height+=2*c,{canvas:a,rotate:n,width:t,height:o,border:i}}},{key:\"getImage\",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var o=document.createElement(\"canvas\");this.isVertical()?(o.width=e.height,o.height=e.width):(o.width=e.width,o.height=e.height);var n=o.getContext(\"2d\");return n.translate(o.width/2,o.height/2),n.rotate(this.props.rotate*Math.PI/180),n.translate(-o.width/2,-o.height/2),this.isVertical()&&n.translate((o.width-o.height)/2,(o.height-o.width)/2),n.drawImage(t.resource,-e.x,-e.y),o}},{key:\"getImageScaledToCanvas\",value:function(){var e=this.getDimensions(),t=e.width,o=e.height,n=document.createElement(\"canvas\");return this.isVertical()?(n.width=o,n.height=t):(n.width=t,n.height=o),this.paintImage(n.getContext(\"2d\"),this.state.image,0,1),n}},{key:\"getXScale\",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:\"getYScale\",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:\"getCroppingRect\",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),o=1/this.props.scale*this.getYScale(),n={x:e.x-t/2,y:e.y-o/2,width:t,height:o},i=0,a=1-n.width,s=0,h=1-n.height;return(this.props.disableBoundaryChecks||t>1||o>1)&&(i=-n.width,a=1,s=-n.height,h=1),r({},n,{x:Math.max(i,Math.min(n.x,a)),y:Math.max(s,Math.min(n.y,h))})}},{key:\"loadImage\",value:function(e){var t;d&&e instanceof File?this.loadingImage=u((t=e,new Promise(function(e,o){var i=new FileReader;i.onload=function(t){try{var i=n(t.target.result);e(i)}catch(t){o(t)}},i.readAsDataURL(t)}))).promise.then(this.handleImageReady).catch(this.props.onLoadFailure):\"string\"==typeof e&&(this.loadingImage=u(n(e,this.props.crossOrigin)).promise.then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:\"getInitialSize\",value:function(e,t){var o=void 0,n=void 0,i=this.getDimensions();return i.height/i.width>t/e?n=e*((o=this.getDimensions().height)/t):o=t*((n=this.getDimensions().width)/e),{height:o,width:n}}},{key:\"paintImage\",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;if(t.resource){var i=this.calculatePosition(t,o);e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(n,n),e.globalCompositeOperation=\"destination-over\",e.drawImage(t.resource,i.x,i.y,i.width,i.height),e.restore()}}},{key:\"calculatePosition\",value:function(e,t){e=e||this.state.image;var o=this.getBorders(t),n=h(o,2),i=n[0],a=n[1],r=this.getCroppingRect(),s=e.width*this.props.scale,u=e.height*this.props.scale,c=-r.x*s,d=-r.y*u;return this.isVertical()?(c+=a,d+=i):(c+=i,d+=a),{x:c,y:d,height:u,width:s}}},{key:\"paint\",value:function(e){e.save(),e.scale(g,g),e.translate(0,0),e.fillStyle=\"rgba(\"+this.props.color.slice(0,4).join(\",\")+\")\";var t=this.props.borderRadius,o=this.getDimensions(),n=this.getBorders(o.border),i=h(n,2),a=i[0],r=i[1],s=o.canvas.height,u=o.canvas.width;t=Math.max(t,0),t=Math.min(t,u/2-a,s/2-r),e.beginPath(),function(e,t,o,n,i,a){if(0===a)e.rect(t,o,n,i);else{var r=n-a,s=i-a;e.translate(t,o),e.arc(a,a,a,Math.PI,1.5*Math.PI),e.lineTo(r,0),e.arc(r,a,a,1.5*Math.PI,2*Math.PI),e.lineTo(n,s),e.arc(r,s,a,2*Math.PI,.5*Math.PI),e.lineTo(a,i),e.arc(a,s,a,.5*Math.PI,Math.PI),e.translate(-t,-o)}}(e,a,r,u-2*a,s-2*r,t),e.rect(u,0,-u,s),e.fill(\"evenodd\"),e.restore()}},{key:\"render\",value:function(){var e=this.props,o=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.style),n=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,function(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}(e,[\"scale\",\"rotate\",\"image\",\"border\",\"borderRadius\",\"width\",\"height\",\"position\",\"color\",\"style\",\"crossOrigin\",\"onLoadFailure\",\"onLoadSuccess\",\"onImageReady\",\"onImageChange\",\"onMouseUp\",\"onMouseMove\",\"onPositionChange\",\"disableBoundaryChecks\",\"disableHiDPIScaling\"])),i=this.getDimensions(),a={width:i.canvas.width,height:i.canvas.height,cursor:this.state.drag?\"grabbing\":\"grab\",touchAction:\"none\"},s={width:i.canvas.width*g,height:i.canvas.height*g,style:r({},a,o)};return s[p.react.down]=this.handleMouseDown,c&&(s[p.react.mouseDown]=this.handleMouseDown),t.createElement(\"canvas\",r({ref:this.setCanvas},s,n))}}]),l}();return v.propTypes={scale:e.number,rotate:e.number,image:e.oneOfType([e.string].concat(function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}(d?[e.instanceOf(File)]:[]))),border:e.oneOfType([e.number,e.arrayOf(e.number)]),borderRadius:e.number,width:e.number,height:e.number,position:e.shape({x:e.number,y:e.number}),color:e.arrayOf(e.number),crossOrigin:e.oneOf([\"\",\"anonymous\",\"use-credentials\"]),onLoadFailure:e.func,onLoadSuccess:e.func,onImageReady:e.func,onImageChange:e.func,onMouseUp:e.func,onMouseMove:e.func,onPositionChange:e.func,disableBoundaryChecks:e.bool,disableHiDPIScaling:e.bool},v.defaultProps={scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1},v});\n"]},"metadata":{},"sourceType":"script"}